#!/usr/bin/python
# -*- coding: utf-8 -*-
#File name: fetchData.py
#Author: sanfanling
#licence: GPL-V3 


from configparser import ConfigParser
import os.path



class fetchData:
    
    def __init__(self):
        fileName = "minesweeper.conf"
        if not os.path.exists(fileName):
            self.initConfigfile()
    
    def getData(self):
        self.cf = ConfigParser()
        self.cf.read(fileName)
        self.questionMark = self.cf.getboolean("general", "questionMark")
        self.autoStart = self.cf.getboolean("general", "autoStart")
        self.sound = self.cf.getboolean("general", "sound")
        self.lastMode = self.cf.get("general", "lastMode")
        
        self.gridSize = self.cf.getint("general", "gridSize")
        self.numberSize = self.cf.getint("general", "numberSize")
        
        self.straightWin = self.cf.getint("general", "straightWin")
        self.straightLose = self.cf. getint("general", "straightLose")
        self.currentStraight = self.cf. getint("general", "currentStraight")
        
        for x in ("easy", "medium", "difficult"):
            exec("self.{}_totalGame = self.cf.getint('{}Mode', 'totalGame')".format(x, x))
            exec("self.{}_totalGame = self.cf.getint('{}Mode', 'winGame')".format(x, x))
            for y in range(1, 11):
                exec("self.{}_{} = self.cf.get('{}Mode', {})".format(x, y, x, y))
        
        
        
    
    def initConfigfile(self):
        conf = """
        ### this file is generated by application, recording all settings and statistics
        
        [general]
        questionMark = True
        autoStart = False
        sound = False
        gridSize = 25
        numberSize = 0
        lastMode = easy
        straightWin = 0
        straightLose = 0
        currentStraight = 0
        
        
        [easyMode]
        1 = 
        2 = 
        3 = 
        4 =
        5 = 
        6 =
        7 =
        8 =
        9 =
        10 =
        totalGame = 0
        winGame = 0
        
        [mediumMode]
        1 = 
        2 = 
        3 = 
        4 =
        5 = 
        6 =
        7 =
        8 =
        9 =
        10 =
        totalGame = 0
        winGame = 0
        
        [difficultMode]
        1 = 
        2 = 
        3 = 
        4 =
        5 = 
        6 =
        7 =
        8 =
        9 =
        10 =
        totalGame = 0
        winGame = 0
        
        [custom]
        size = 10, 10, 10
        """
